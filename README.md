# FlowChronicle
This repository is part of the artifact evaluation of the paper ``FlowChronicle: Synthetic Network Flow Generation through Pattern Set Mining'' accepted at the CoNEXT'24 conference in Los Angeles.

You will find in this repository everything needed to reproduce the training and generation of the FlowChronicle model, as well as the different data and functions required to evaluate it.

Please follow these instructions carefully to reproduce the content of the paper.

## Clone the repository
First, you should clone the repository in your working environment using your preferred method (ssh, gh, etc..)
```
git clone git@github.com:joschac/FlowChronicleCoNEXT.git
```

## Download the different datasets and the original model
Please download the two archives following this link: https://drive.google.com/drive/folders/1M4737El_lPQVX8k5YXkLKkTnk3wo73-R
Unpack the content of the two archives in their respective folder.

## Build the working container
In order to facilitate the reproducibility of our results, our application and its dependencies are embedded inside a Docker container.
Please build it by launching the following command inside the Flowhronicle repository:
```
docker build -f setup/Dockerfile -t flwchncl .
```
### (Alternatively: Use pip and venv)
If you cannot run Docker, please create a virtual environment and install the dependencies of ```setup/requirements.txt```:
```
cd setup
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```
Make sure, in this case, that your version of Python is superior to 3.10.

## Run the working container
After having built it, you should run the container to get into our ```/app/``` directory as the root
```
docker run -it -p 8888:8888 flwchncl
```

## Train your own FlowChronicle model and generate Network flow from it :
Inside ```/app/```, you can simply run the ```our_train_and_generate.py``` in order to train a model and generate new network flows
```
python3 our_train_and_generate.py
```
### (Alternatively 1: Use our FlowChronicle model to generate new network flows)
Training a new model from scratch can be really long and computationally intensive. If you just want to generate new data from an already preexisting model, do:
```
python3 load_model.py
```
### (Alternatively 2: Use our generated data)
If you can neither train nor generate new data, you can still inspect the data that we generate ourselves.
The network flows generated by our model are at ```data/our_syn.csv```

## Evaluate the results
Whether you have generated new data or not, the different evaluations led in Section 7 of the paper can be reproduced with the ```experiments.ipynb``` notebook
Inside the ```/app/``` directory of the container please do
```
jupyter notebook --ip=0.0.0.0 --port=8888 --no-browser --allow-root
```
The Notebook server is launched inside the container, click on one of the URLs (usually one of them should be ```http://localhost:8888/``` if you are working locally) and open ```experiments.ipynb``` inside the server.
The notebook contains all the instructions for reproducing the results.
### (Alternatively: Use our owns results)
If you truly want to recreate the tables and figure of the papers, feel free to use our own generated data for both FlowChronicle and the baselines; they can be found inside the ```results/``` directory.
